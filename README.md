# 💰 GoldCurrency

**GoldCurrency**는 마인크래프트 1.21 Paper 서버를 위한 **실물 경제 기반의 올인원 화폐 플러그인**입니다.
가상의 숫자와 실물 아이템(금)을 연동하여 현실적인 경제 시스템을 제공하며, 플레이어 간 거래를 위한 상점(경매장) 시스템과 강력한 보안 기능을 포함하고 있습니다.

![Java](https://img.shields.io/badge/Java-21-orange) ![Server](https://img.shields.io/badge/Server-Paper_1.21-blue) ![License](https://img.shields.io/badge/License-MIT-green)

---

## ✨ 주요 기능 (Features)

### 1. 🪙 화폐 시스템 (Economy)
- **단위**: `⛁`
- **실물 입출금**:
  - `/withdraw` 명령어로 계좌의 돈을 인챈트된 금 아이템으로 실물화할 수 있습니다.
  - **10⛁** (금 조각) / **100⛁** (금괴) / **1000⛁** (금 블록)
  - 실물 화폐를 **우클릭**하면 다시 계좌로 입금됩니다.
- **탭 리스트 연동**: `TAB` 키를 눌렀을 때 닉네임 앞에 잔액이 표시되며, **자산 순으로 플레이어가 정렬**됩니다.

### 2. ⛏️ 채굴 보상 (Mining)
- **수익 창출**: 금광석 또는 심층암 금광석 채굴 시 **10⛁**가 즉시 지급됩니다.
- **조건**: '섬세한 손길(Silk Touch)' 인챈트가 없는 곡괭이만 해당됩니다.
- **어뷰징 방지**: 플레이어가 설치한 광석은 영구적으로 기록되어, 다시 캐더라도 돈을 지급하지 않습니다 (서버 재시작 후에도 유지).

### 3. 🏪 플레이어 마켓 (Marketplace)
- **/shop**: 서버 내 모든 플레이어가 이용할 수 있는 아이템 거래소입니다.
- **판매**: `/shop add <가격> [이름]` 명령어로 손에 든 아이템을 즉시 판매 등록합니다.
- **구매**: 상점 GUI에서 아이템을 클릭하여 구매합니다. (페이징 시스템 지원)
- **특징**:
  - 판매자가 본인 아이템 클릭 시 무료로 회수.
  - 아이템 고유 ID(UUID) 검증을 통한 **Race Condition(가로채기/바꿔치기) 완벽 방지**.

### 4. 💀 사망 페널티 및 세이브 (Death & Save)
- **페널티**: 사망 시 계좌 잔액의 **30%**를 잃습니다.
- **스마트 인벤토리 세이브**:
  - **화폐 아이템 & 플레이어 머리**: 바닥에 드랍됩니다.
  - **일반 아이템**: 안전하게 보존됩니다.
- **안전장치 (`/lost`)**:
  - 인벤토리가 꽉 차서 아이템을 받지 못한 경우, 별도의 저장소에 보관됩니다.
  - `/lost` 명령어로 5분 이내(접속 시간 기준)에 수령할 수 있습니다.
  - 서버가 강제 종료되더라도 데이터는 파일에 안전하게 저장됩니다.

---

## 🛠️ 명령어 (Commands)

| 명령어 | 설명 | 권한 |
| :--- | :--- | :--- |
| `/pay <플레이어> <금액>` | 다른 플레이어에게 돈을 송금합니다. | 유저 |
| `/withdraw <금액>` | 계좌의 돈을 실물 아이템으로 인출합니다. (최소 10⛁) | 유저 |
| `/shop` | 플레이어 상점(경매장)을 엽니다. | 유저 |
| `/shop add <가격> [이름]` | 손에 든 아이템을 상점에 등록합니다. (이름 설정 가능) | 유저 |
| `/shop reset` | 상점의 모든 매물을 초기화합니다. | **관리자(OP)** |
| `/lost` | 부활 후 인벤토리 공간 부족으로 받지 못한 아이템을 수령합니다. | 유저 |

---

## 🛡️ 보안 및 버그 방지 (Security & Anti-Exploit)

본 플러그인은 경제 시스템 붕괴를 막기 위해 다음과 같은 강력한 보안 로직이 적용되어 있습니다.

1.  **화폐 훼손/변형 방지**:
    - 화폐 아이템은 **제작대, 모루, 호퍼, 꾸러미(Bundle), 아이템 액자** 등에 사용할 수 없습니다.
    - 화폐는 바닥에 설치할 수 없습니다.
2.  **무한 채굴 방지**:
    - `Chunk PersistentDataContainer`를 사용하여 플레이어가 설치한 광석 위치를 영구적으로 저장합니다.
3.  **아이템 증발 방지**:
    - 상점 구매, 출금, 부활 등 아이템을 받는 모든 상황에서 인벤토리가 꽉 찼을 경우 **바닥에 드랍**하거나 **임시 보관소(`/lost`)**로 이동됩니다.
4.  **상점 동기화**:
    - 상점 목록이 갱신되는 찰나의 순간에 잘못된 아이템을 구매하지 않도록 고유 ID를 대조합니다.

---

## 📥 설치 방법 (Installation)

1. 이 저장소에서 `.jar` 파일을 다운로드합니다 (또는 프로젝트를 빌드합니다).
2. 서버의 `plugins` 폴더에 파일을 넣습니다.
3. 서버를 시작합니다.
4. `plugins/GoldCurrency/` 폴더 내의 설정 파일들이 자동으로 생성됩니다.

---

## 🏗️ 개발 환경 (Tech Stack)

- **Language**: Java 21
- **Platform**: PaperMC 1.21 (API version 1.21)
- **Build Tool**: Maven

---

## 📝 라이선스 (License)

이 프로젝트는 MIT License를 따릅니다. 자유롭게 수정 및 배포가 가능합니다.
